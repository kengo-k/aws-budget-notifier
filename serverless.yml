service: localstack-demo

provider:
  name: aws
  runtime: python3.8
  stage: ${opt:stage, 'dev'}
  region: ${file(./config.${self:provider.stage}.yml):region, 'us-east-1'}
  environment:
    LOCALSTACK_HOSTNAME: ${file(./config.${self:provider.stage}.yml):localstack_hostname, 'localhost'}

functions:
  hello:
    handler: handler.hello
    events:
      - eventBridge:
          schedule: rate(1 minute)

plugins:
  - serverless-localstack

custom:
  localstack:
    stages:
      - local
    host: http://localhost
    edgePort: 4566
    autostart: true